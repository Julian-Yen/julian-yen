parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"BG6m":[function(require,module,exports) {
var e=window.AudioContext||window.webkitAudioContext,t=new e,n=document.querySelector(".bgm"),o=document.querySelector("audio"),i=t.createMediaElementSource(o);i.connect(t.destination),n.addEventListener("click",function(){"suspended"===t.state&&t.resume(),"false"===this.dataset.playing?(o.play(),this.dataset.playing="true"):"true"===this.dataset.playing&&(o.pause(),this.dataset.playing="false"),n.classList.toggle("pause")}),o.addEventListener("ended",function(){n.dataset.playing="false",n.classList.toggle("pause")},!1);var a=t.createGain(),r=new Konva.Stage({container:"box",width:window.innerWidth,height:window.innerHeight+1e3}),c=new Konva.Layer,u=window.innerWidth,l=t.createAnalyser(),s=document.querySelector("#waveform"),d=s.getContext("2d");s.width=u;var f=t.createAnalyser(),m=document.querySelector("#waveform2"),h=m.getContext("2d");function w(e,t){return Math.floor(Math.random()*(t-e+1))+e}m.width=u;var g=null,v=null,y=!0,p=!0;function T(){y&&(g=requestAnimationFrame(T)),l.minDecibels=-150,l.fftSize=1024;var e=l.frequencyBinCount,t=u,n=new Uint8Array(e);l.getByteTimeDomainData(n),d.clearRect(0,0,t,200),d.lineWidth=2,d.strokeStyle="#fff",d.beginPath();for(var o=1*t/e,i=0,a=0;a<e;a++){var r=200*(n[a]/128)/2;0===a?d.moveTo(i,r):d.lineTo(i,r),i+=o}d.lineTo(s.width,s.height/2),d.stroke()}function A(){p&&(v=requestAnimationFrame(A)),f.minDecibels=-150,f.fftSize=1024;var e=l.frequencyBinCount,t=u,n=new Uint8Array(e);f.getByteTimeDomainData(n),h.clearRect(0,0,t,200),h.lineWidth=2,h.strokeStyle="#fff",h.beginPath();for(var o=1*t/e,i=0,a=0;a<e;a++){var r=200*(n[a]/128)/2;0===a?h.moveTo(i,r):h.lineTo(i,r),i+=o}h.lineTo(m.width,m.height/2),h.stroke()}for(var S=[],b=[],q=[],C=[],k=[],B=function(e){R=sounds[e].path,C[e]=sounds[e].level,k[e]=sounds[e].time,console.log(R),fetch(R).then(function(e){return e.arrayBuffer()}).then(function(e){return t.decodeAudioData(e)}).then(function(t){S[e]=t})},D=0;D<sounds.length;D++){var R;B(D)}var x,L,W=u,E=200;function F(){for(var e=0;e<b.length;e++)b[e]&&b[e].stop(),q[e]&&q[e].stop();a.gain.linearRampToValueAtTime(0,t.currentTime+1),L.loop=!1,y=!1,setTimeout(function(){d.clearRect(0,0,W,E)},50),setTimeout(function(){L.stop(),x.stop()},1e3)}function z(e){x=t.createBufferSource(),b[e]=x,x.buffer=S[e],p=!0,x.connect(a),a.connect(f),f.connect(t.destination),a.gain.linearRampToValueAtTime(1,t.currentTime+1),x.start(t.currentTime),c.draw(),A()}function K(e){L=t.createBufferSource(),q[e]=L,L.buffer=S[e],L.connect(a),a.gain.linearRampToValueAtTime(1,t.currentTime+1),a.connect(l),l.connect(t.destination),L.start(0),L.loop=!0,y=!0,T()}function M(){x.stop(),p=!1,setTimeout(function(){h.clearRect(0,0,W,E)},50)}window.cancelAnimationFrame||window.mozCancelAnimationFrame;var V=document.querySelector("#clear");V.addEventListener("click",F);for(var P=function(e){var t=k[e],n=C[e];console.log(t),console.log(n),(G=new Konva.Circle({x:150*t-1400,y:400*n-300+w(0,200),radius:w(30,40),fill:"white",opacity:.8,globalCompositeOperation:"saturation"})).on("mouseover",function(){z(e);this.fill("AntiqueWhite"),c.draw()}),G.on("mouseout",function(){M();this.fill("Thistle"),c.draw()}),G.on("click",function(){K(e)}),c.add(G),c.draw(),r.add(c)},U=0;U<26;U++){var G;P(U)}
},{}]},{},["BG6m"], null)
//# sourceMappingURL=/soundmap.dcf36e25.js.map